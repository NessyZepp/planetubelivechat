{"version":3,"file":"storage.js","sourceRoot":"","sources":["../../../../server/lib/federation/storage.ts"],"names":[],"mappings":"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"}